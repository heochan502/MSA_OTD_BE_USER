<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.otd.otd_admin.application.admin.AdminMapper">
    <select id="groupByAge">
        SELECT
        CASE
        WHEN TIMESTAMPDIFF(YEAR, STR_TO_DATE(birth_date, '%Y%m%d'), CURDATE()) BETWEEN 10 AND 19 THEN '10대'
        WHEN TIMESTAMPDIFF(YEAR, STR_TO_DATE(birth_date, '%Y%m%d'), CURDATE()) BETWEEN 20 AND 29 THEN '20대'
        WHEN TIMESTAMPDIFF(YEAR, STR_TO_DATE(birth_date, '%Y%m%d'), CURDATE()) BETWEEN 30 AND 39 THEN '30대'
        WHEN TIMESTAMPDIFF(YEAR, STR_TO_DATE(birth_date, '%Y%m%d'), CURDATE()) BETWEEN 40 AND 49 THEN '40대'
        WHEN TIMESTAMPDIFF(YEAR, STR_TO_DATE(birth_date, '%Y%m%d'), CURDATE()) BETWEEN 50 AND 59 THEN '50대'
        ELSE '기타'
        END AS ageGroup,
        COUNT(*) AS count
        FROM user
        GROUP BY ageGroup;
    </select>
</mapper>